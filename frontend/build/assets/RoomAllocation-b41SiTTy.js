import{a as r,j as e}from"./index-Dzdc8_NM.js";import{a as x}from"./api-Cg1DICNh.js";import"./index-t--hEgTQ.js";const N=()=>{const[h,p]=r.useState([]),[_,f]=r.useState(!0),[d,u]=r.useState(null),[i,j]=r.useState({}),[y,m]=r.useState(!1),[s,b]=r.useState({name:"",capacity:"",location:"",room_type:"lecture_hall",has_ac:!1,has_projector:!1,has_whiteboard:!1,has_sound_system:!1,has_wifi:!1,availability:!0});r.useEffect(()=>{(async()=>{try{const n=await x.get("api/room-allocation/rooms/");p(n.data)}catch(n){console.error("Error fetching rooms:",n)}finally{f(!1)}})()},[]);const o=t=>{const{name:n,value:a,type:c,checked:g}=t.target;b({...s,[n]:c==="checkbox"?g:a})},l=t=>{const{name:n,value:a,type:c,checked:g}=t.target;j({...i,[n]:c==="checkbox"?g:a})},v=async t=>{var n;t.preventDefault();try{const a=await x.post("api/room-allocation/rooms/",{...s,capacity:parseInt(s.capacity,10)});p([...h,a.data]),m(!1),b({name:"",capacity:"",location:"",room_type:"lecture_hall",has_ac:!1,has_projector:!1,has_whiteboard:!1,has_sound_system:!1,has_wifi:!1,availability:!0})}catch(a){console.error("Error adding room:",((n=a.response)==null?void 0:n.data)||a.message)}},w=t=>{u(t.id),j({...t})},C=async t=>{try{const n=await x.put(`api/room-allocation/rooms/${t}/`,{...i,capacity:parseInt(i.capacity,10)}),a=h.map(c=>c.id===t?n.data:c);p(a),u(null)}catch(n){console.error("Error saving room:",n)}},k=()=>{u(null)},R=async t=>{if(window.confirm("Are you sure you want to delete this room?"))try{await x.delete(`api/room-allocation/rooms/${t}/`),p(h.filter(a=>a.id!==t))}catch(a){console.error("Error deleting room:",a)}};return e.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:[e.jsx("h1",{children:"Rooms"}),e.jsx("button",{onClick:()=>m(!y),style:{backgroundColor:"green",padding:"10px 20px",fontSize:"14px",marginBottom:"20px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:y?"Cancel":"Add Room"}),y&&e.jsxs("form",{onSubmit:v,style:{marginBottom:"20px",maxWidth:"500px"},children:[e.jsx("h3",{children:"Add New Room"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Name:"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:o,required:!0,style:{width:"100%",padding:"5px"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Capacity:"}),e.jsx("input",{type:"number",name:"capacity",value:s.capacity,onChange:o,required:!0,style:{width:"100%",padding:"5px"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Location:"}),e.jsx("input",{type:"text",name:"location",value:s.location,onChange:o,required:!0,style:{width:"100%",padding:"5px"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Room Type:"}),e.jsxs("select",{name:"room_type",value:s.room_type,onChange:o,style:{width:"100%",padding:"5px"},children:[e.jsx("option",{value:"lecture_hall",children:"Lecture Hall"}),e.jsx("option",{value:"lab",children:"Lab"}),e.jsx("option",{value:"seminar_room",children:"Seminar Room"}),e.jsx("option",{value:"auditorium",children:"Auditorium"})]})]}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"has_ac",checked:s.has_ac,onChange:o}),"Air Conditioning"]})}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"has_projector",checked:s.has_projector,onChange:o}),"Projector"]})}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"has_whiteboard",checked:s.has_whiteboard,onChange:o}),"Whiteboard"]})}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"has_sound_system",checked:s.has_sound_system,onChange:o}),"Sound System"]})}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"has_wifi",checked:s.has_wifi,onChange:o}),"WiFi"]})}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"availability",checked:s.availability,onChange:o}),"Available"]})})]}),e.jsx("button",{type:"submit",style:{backgroundColor:"green",padding:"10px 20px",fontSize:"14px",marginTop:"10px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:"Add Room"})]}),_?e.jsx("p",{children:"Loading rooms..."}):e.jsxs("table",{style:{width:"100%",marginTop:"20px"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"10px"},children:"Room ID"}),e.jsx("th",{style:{padding:"10px"},children:"Name"}),e.jsx("th",{style:{padding:"10px"},children:"Capacity"}),e.jsx("th",{style:{padding:"10px"},children:"Location"}),e.jsx("th",{style:{padding:"10px"},children:"Room Type"}),e.jsx("th",{style:{padding:"10px"},children:"AC"}),e.jsx("th",{style:{padding:"10px"},children:"Projector"}),e.jsx("th",{style:{padding:"10px"},children:"Whiteboard"}),e.jsx("th",{style:{padding:"10px"},children:"Sound System"}),e.jsx("th",{style:{padding:"10px"},children:"WiFi"}),e.jsx("th",{style:{padding:"10px"},children:"Available"}),e.jsx("th",{style:{padding:"10px"},children:"Actions"})]})}),e.jsx("tbody",{children:h.map(t=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:t.id}),e.jsx("td",{style:{padding:"10px"},children:d===t.id?e.jsx("input",{type:"text",name:"name",value:i.name,onChange:l,style:{width:"100%",padding:"5px"}}):t.name}),e.jsx("td",{style:{padding:"10px"},children:d===t.id?e.jsx("input",{type:"number",name:"capacity",value:i.capacity,onChange:l,style:{width:"100%",padding:"5px"}}):t.capacity}),e.jsx("td",{style:{padding:"10px"},children:d===t.id?e.jsx("input",{type:"text",name:"location",value:i.location,onChange:l,style:{width:"100%",padding:"5px"}}):t.location}),e.jsx("td",{style:{padding:"10px"},children:d===t.id?e.jsxs("select",{name:"room_type",value:i.room_type,onChange:l,style:{width:"100%",padding:"5px"},children:[e.jsx("option",{value:"lecture_hall",children:"Lecture Hall"}),e.jsx("option",{value:"lab",children:"Lab"}),e.jsx("option",{value:"seminar_room",children:"Seminar Room"}),e.jsx("option",{value:"auditorium",children:"Auditorium"})]}):t.room_type.replace("_"," ")}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:d===t.id?e.jsx("input",{type:"checkbox",name:"has_ac",checked:i.has_ac,onChange:l}):t.has_ac?"Yes":"No"}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:d===t.id?e.jsx("input",{type:"checkbox",name:"has_projector",checked:i.has_projector,onChange:l}):t.has_projector?"Yes":"No"}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:d===t.id?e.jsx("input",{type:"checkbox",name:"has_whiteboard",checked:i.has_whiteboard,onChange:l}):t.has_whiteboard?"Yes":"No"}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:d===t.id?e.jsx("input",{type:"checkbox",name:"has_sound_system",checked:i.has_sound_system,onChange:l}):t.has_sound_system?"Yes":"No"}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:d===t.id?e.jsx("input",{type:"checkbox",name:"has_wifi",checked:i.has_wifi,onChange:l}):t.has_wifi?"Yes":"No"}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:d===t.id?e.jsx("input",{type:"checkbox",name:"availability",checked:i.availability,onChange:l}):t.availability?"Yes":"No"}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:d===t.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C(t.id),style:{backgroundColor:"green",padding:"5px 10px",fontSize:"12px",marginRight:"5px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:"Save"}),e.jsx("button",{onClick:k,style:{backgroundColor:"gray",padding:"5px 10px",fontSize:"12px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w(t),style:{backgroundColor:"#8B8000",padding:"5px 10px",fontSize:"12px",marginRight:"5px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:"Edit"}),e.jsx("button",{onClick:()=>R(t.id),style:{backgroundColor:"#8B0000",padding:"5px 10px",fontSize:"12px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:"Delete"})]})})]},t.id))})]})]})};export{N as default};
