import{a as s,j as e}from"./index-Dzdc8_NM.js";import{a as c}from"./api-Cg1DICNh.js";import"./index-t--hEgTQ.js";const $=()=>{const[p,x]=s.useState([]),[w,v]=s.useState(!0),[d,u]=s.useState(null),[n,a]=s.useState({}),[h,j]=s.useState(!1),[o,y]=s.useState({course_code:"",course_name:"",instructor:"",room:"",start_time:"",end_time:"",status:"scheduled"}),[_,b]=s.useState(null),[S,m]=s.useState(!1),[R,f]=s.useState(null),[k,g]=s.useState(!1);s.useEffect(()=>{(async()=>{try{const r=await c.get("api/room-allocation/schedules/");x(r.data)}catch(r){console.error("Error fetching schedules:",r)}finally{v(!1)}})()},[]);const l=t=>{const{name:r,value:i}=t.target;y({...o,[r]:i})},D=async t=>{t.preventDefault();try{const r=await c.post("api/room-allocation/schedules/",o);x([...p,r.data]),j(!1),y({course_code:"",course_name:"",instructor:"",room:"",start_time:"",end_time:"",status:"scheduled"})}catch(r){console.error("Error adding schedule:",r)}},I=t=>{u(t.id),a({...t})},A=async t=>{try{const r=await c.put(`api/room-allocation/schedules/${t}/`,n),i=p.map(C=>C.id===t?r.data:C);x(i),u(null)}catch(r){console.error("Error saving schedule:",r)}},E=()=>{u(null)},N=async t=>{if(window.confirm("Are you sure you want to delete this schedule?"))try{await c.delete(`api/room-allocation/schedules/${t}/`),x(p.filter(i=>i.id!==t))}catch(i){console.error("Error deleting schedule:",i)}},z=async t=>{try{const r=await c.get(`api/room-allocation/rooms/${t}/`);b(r.data),m(!0)}catch(r){console.error("Error fetching room details:",r),b({id:t,name:"Room 101",capacity:50,location:"Building A",room_type:"Lecture Hall",has_ac:!0,has_projector:!0,has_whiteboard:!1,has_sound_system:!0,has_wifi:!0,availability:!0}),m(!0)}},T=async t=>{try{const r=await c.get(`api/get-user-details/?user_id=${t}`);f(r.data),g(!0)}catch(r){console.error("Error fetching instructor details:",r),f({id:t,username:"John Doe",email:"john.doe@example.com",first_name:"John",last_name:"Doe",is_staff:!0,is_active:!0}),g(!0)}},F=({room:t,onClose:r})=>t?e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"20px",boxShadow:"0 0 10px rgba(255, 255, 255, 0.1)",zIndex:1e3,width:"400px",borderRadius:"10px"},children:[e.jsx("h3",{children:"Room Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Room ID:"})," ",t.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Room Name:"})," ",t.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Capacity:"})," ",t.capacity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",t.location]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Room Type:"})," ",t.room_type]}),e.jsx("p",{children:e.jsx("strong",{children:"Amenities:"})}),e.jsxs("ul",{children:[e.jsxs("li",{children:["AC: ",t.has_ac?"Yes":"No"]}),e.jsxs("li",{children:["Projector: ",t.has_projector?"Yes":"No"]}),e.jsxs("li",{children:["Whiteboard: ",t.has_whiteboard?"Yes":"No"]}),e.jsxs("li",{children:["Sound System: ",t.has_sound_system?"Yes":"No"]}),e.jsxs("li",{children:["Wi-Fi: ",t.has_wifi?"Yes":"No"]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Availability:"})," ",t.availability?"Available":"Not Available"]}),e.jsx("button",{onClick:r,style:{backgroundColor:"#007bff",color:"white",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Close"})]}):e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"20px",boxShadow:"0 0 10px rgba(255, 255, 255, 0.1)",zIndex:1e3,borderRadius:"10px"},children:[e.jsx("h3",{children:"Room Details"}),e.jsx("p",{children:"No room details available."}),e.jsx("button",{onClick:r,style:{backgroundColor:"#007bff",color:"white",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Close"})]}),q=({instructor:t,onClose:r})=>t?e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"20px",boxShadow:"0 0 10px rgba(255, 255, 255, 0.1)",zIndex:1e3,width:"400px",borderRadius:"10px"},children:[e.jsx("h3",{children:"Instructor Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Instructor ID:"})," ",t.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Username:"})," ",t.username]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"First Name:"})," ",t.first_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Last Name:"})," ",t.last_name]}),e.jsx("button",{onClick:r,style:{backgroundColor:"#007bff",color:"white",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Close"})]}):e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"20px",boxShadow:"0 0 10px rgba(255, 255, 255, 0.1)",zIndex:1e3,borderRadius:"10px"},children:[e.jsx("h3",{children:"Instructor Details"}),e.jsx("p",{children:"No instructor details available."}),e.jsx("button",{onClick:r,style:{backgroundColor:"#007bff",color:"white",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Close"})]});return e.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:[e.jsx("h1",{children:"Schedule Viewer"}),e.jsx("button",{onClick:()=>j(!h),style:{backgroundColor:"green",padding:"10px 20px",fontSize:"14px",marginBottom:"20px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:h?"Cancel":"Add Schedule"}),h&&e.jsxs("form",{onSubmit:D,style:{marginBottom:"20px",maxWidth:"500px"},children:[e.jsx("h3",{children:"Add New Schedule"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Course Code:"}),e.jsx("input",{type:"text",name:"course_code",value:o.course_code,onChange:l,required:!0,style:{width:"100%",padding:"5px"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Course Name:"}),e.jsx("input",{type:"text",name:"course_name",value:o.course_name,onChange:l,required:!0,style:{width:"100%",padding:"5px"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Instructor ID:"}),e.jsx("input",{type:"number",name:"instructor",value:o.instructor,onChange:l,required:!0,style:{width:"100%",padding:"5px"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Room ID:"}),e.jsx("input",{type:"number",name:"room",value:o.room,onChange:l,required:!0,style:{width:"100%",padding:"5px"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Start Time:"}),e.jsx("input",{type:"datetime-local",name:"start_time",value:o.start_time,onChange:l,required:!0,style:{width:"100%",padding:"5px"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"End Time:"}),e.jsx("input",{type:"datetime-local",name:"end_time",value:o.end_time,onChange:l,required:!0,style:{width:"100%",padding:"5px"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Status:"}),e.jsxs("select",{name:"status",value:o.status,onChange:l,style:{width:"100%",padding:"5px"},children:[e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"canceled",children:"Canceled"})]})]})]}),e.jsx("button",{type:"submit",style:{backgroundColor:"green",padding:"10px 20px",fontSize:"14px",marginTop:"10px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:"Add Schedule"})]}),w?e.jsx("p",{children:"Loading schedules..."}):e.jsxs("table",{style:{width:"100%",marginTop:"20px",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"10px"},children:"Course Code"}),e.jsx("th",{style:{padding:"10px"},children:"Course Name"}),e.jsx("th",{style:{padding:"10px"},children:"Start Time"}),e.jsx("th",{style:{padding:"10px"},children:"End Time"}),e.jsx("th",{style:{padding:"10px"},children:"Status"}),e.jsx("th",{style:{padding:"10px"},children:"Instructor ID"}),e.jsx("th",{style:{padding:"10px"},children:"Room ID"}),e.jsx("th",{style:{padding:"10px"},children:"Actions"})]})}),e.jsx("tbody",{children:p.map(t=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"10px"},children:d===t.id?e.jsx("input",{type:"text",name:"course_code",value:n.course_code,onChange:r=>a({...n,course_code:r.target.value}),style:{width:"100%",padding:"5px"}}):t.course_code}),e.jsx("td",{style:{padding:"10px"},children:d===t.id?e.jsx("input",{type:"text",name:"course_name",value:n.course_name,onChange:r=>a({...n,course_name:r.target.value}),style:{width:"100%",padding:"5px"}}):t.course_name}),e.jsx("td",{style:{padding:"10px"},children:d===t.id?e.jsx("input",{type:"datetime-local",name:"start_time",value:n.start_time.slice(0,16),onChange:r=>a({...n,start_time:r.target.value}),style:{width:"100%",padding:"5px"}}):t.start_time}),e.jsx("td",{style:{padding:"10px"},children:d===t.id?e.jsx("input",{type:"datetime-local",name:"end_time",value:n.end_time.slice(0,16),onChange:r=>a({...n,end_time:r.target.value}),style:{width:"100%",padding:"5px"}}):t.end_time}),e.jsx("td",{style:{padding:"10px"},children:d===t.id?e.jsxs("select",{name:"status",value:n.status,onChange:r=>a({...n,status:r.target.value}),style:{width:"100%",padding:"5px"},children:[e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"canceled",children:"Canceled"})]}):t.status}),e.jsx("td",{style:{padding:"10px"},children:d===t.id?e.jsx("input",{type:"number",name:"instructor",value:n.instructor,onChange:r=>a({...n,instructor:r.target.value}),style:{width:"100%",padding:"5px"}}):e.jsx("span",{style:{color:"blue",cursor:"pointer",textDecoration:"underline"},onClick:()=>T(t.instructor),children:t.instructor})}),e.jsx("td",{style:{padding:"10px"},children:d===t.id?e.jsx("input",{type:"number",name:"room",value:n.room,onChange:r=>a({...n,room:r.target.value}),style:{width:"100%",padding:"5px"}}):e.jsx("span",{style:{color:"blue",cursor:"pointer",textDecoration:"underline"},onClick:()=>z(t.room),children:t.room})}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:d===t.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>A(t.id),style:{backgroundColor:"green",padding:"5px 10px",fontSize:"12px",marginRight:"5px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:"Save"}),e.jsx("button",{onClick:E,style:{backgroundColor:"gray",padding:"5px 10px",fontSize:"12px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>I(t),style:{backgroundColor:"#8B8000",padding:"5px 10px",fontSize:"12px",marginRight:"5px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:"Edit"}),e.jsx("button",{onClick:()=>N(t.id),style:{backgroundColor:"#8B0000",padding:"5px 10px",fontSize:"12px",border:"none",cursor:"pointer",borderRadius:"5px",color:"white"},children:"Delete"})]})})]},t.id))})]}),S&&e.jsx(F,{room:_,onClose:()=>m(!1)}),k&&e.jsx(q,{instructor:R,onClose:()=>g(!1)})]})};export{$ as default};
